!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){(t=n(1)(!1)).push([e.i,"::placeholder{color:#e2e4e3;transition:color 0.5s}*{box-sizing:border-box}body{padding:15px;background:#f7f7f7}a{text-decoration:none;color:inherit;letter-spacing:-0.3px;transition:all 0.3s}a:hover{text-decoration:underline}.ps-text{color:#656565;padding-left:2px;margin:8px 0 0}#search-form{width:100%;position:relative}#search-form h2{font-size:12px;color:#444;margin:10px 0 15px}#search-form #search-box{position:relative}#search-box input{line-height:28px;height:50px;padding:3px 15px 3px 45px;font-size:20px;font-weight:500;color:#5a6767;display:inline-block;width:100%;border:0;transition:0.3s}#search-box input:focus{outline:none;color:#5a6767;box-shadow:2px 2px 18px 0px rgba(0,0,0,0.1)}#search-box #search-icon{margin:0;position:absolute;top:15px;left:14px}#deep-search{margin:15px 0 20px;color:#656565}#deep-search span{display:inline-block}#keyword-container h2{padding-top:40px;border-top:1px solid #eee;font-size:12px;color:#444;margin:46px 0 15px}#keyword-container ul{padding:0;list-style:none}#keyword-container ul li{position:relative;background:#fff;padding-right:30px;margin-bottom:8px}#keyword-container ul li:before{content:'';position:absolute;width:6px;height:100%}#keyword-container ul li:nth-child(1):before{background:#AEDFDB}#keyword-container ul li:nth-child(2):before{background:#F4D94E}#keyword-container ul li:nth-child(3):before{background:#F38D9B}#keyword-container ul li:nth-child(4):before{background:#BEA6F9}#keyword-container ul li:nth-child(5):before{background:#99d45D}#keyword-container ul li p{display:inline-block;padding:5px 5px 5px 20px;margin:0;line-height:34px;font-size:16px}#keyword-container ul li svg{position:absolute;top:10px;right:10px;transform:scale(0.7);cursor:pointer;opacity:0;transition:opacity 0.2s}#keyword-container ul li:hover svg{opacity:1}footer{color:#444;font-size:11px;font-weight:bold;position:fixed;bottom:15px;left:20px}\n",""]),e.exports=t},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",o=e[3];if(!o)return n;if(t&&"function"==typeof btoa){var i=(r=o,a=btoa(unescape(encodeURIComponent(JSON.stringify(r)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),"/*# ".concat(c," */")),s=o.sources.map((function(e){return"/*# sourceURL=".concat(o.sourceRoot||"").concat(e," */")}));return[n].concat(s).concat([i]).join("\n")}var r,a,c;return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,o){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(o)for(var s=0;s<this.length;s++){var r=this[s][0];null!=r&&(i[r]=!0)}for(var a=0;a<e.length;a++){var c=[].concat(e[a]);o&&i[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),t.push(c))}},t}},function(e,t,n){"use strict";n.r(t);var o=class{constructor(){this.body=document.body,this.color=["#AEDFDB","#F4D94E","#F38D9B","#BEA6F9","#99d45D"],this.except=["SCRIPT","LINK","STYLE","MAT-ICON"],this.wordCount=[],this.wordPosition=[]}insertFmwElement(e){e.childNodes.forEach(e=>{"#text"===e.nodeName&&-1===this.except.indexOf(e.parentNode.nodeName)&&""!==e.data.replace(/\t|\n| /gm,"")?this.replaceElement(e):"IFRAME"===e.nodeName&&e.contentDocument?e.contentDocument.body.childNodes.forEach(e=>{this.insertFmwElement(e)}):e.childNodes&&e.childNodes.length&&-1===this.except.indexOf(e.nodeName)&&this.insertFmwElement(e)})}replaceElement(e){const t=document.createElement("i");t.className="fmw-style-container",t.style.fontStyle="normal";let n=e.data;this.findWords.forEach((t,o)=>{const i=new RegExp(t,"gim");if(i.test(n)){const t="fmw-style fmw-style-"+o,s="font-style: normal; display: inline-block; box-shadow: 1px 3px 3px rgba(0,0,0,0.2); border-radius: 4px; padding: 0 5px; color: #000;",r=`background: ${this.color[o]};`;n=n.replace(i,`\n          <i class="${t}" style="${s+r}">\n            $&\n          </i>\n        `),this.wordCount[o]+=1;const a=this.elementAbsPositionTop(e.parentElement),c=80;this.wordPosition[o]=this.wordPosition[o].concat(a-c)}}),e.data!==n&&(t.innerHTML=n,e.parentNode.replaceChild(t,e))}elementAbsPositionTop(e){let t=0;for(;e.offsetParent;)t+=e.offsetTop-e.scrollTop,e=e.offsetParent;return t}deleteFmwElement(e){let t=e.children,n=t.length-1;for(;n>=0;)"IFRAME"===t[n].nodeName&&t[n].contentDocument&&this.deleteFmwElement(t[n].contentDocument.body),t[n].children&&t[n].children.length&&-1===this.except.indexOf(t[n].nodeName)&&this.deleteFmwElement(t[n]),-1!==String(t[n].className).indexOf("fmw-style-container")&&"I"===t[n].nodeName&&(t[n].outerHTML=t[n].textContent),n--}resetWordCount(){this.wordCount=[]}resetWordPosition(){this.wordPosition=[]}searchDomElement(e){this.deleteFmwElement(this.body),e.length&&(this.findWords=e,this.wordCount=Array(e.length).fill(0),this.wordPosition=Array(e.length).fill([]),this.body.childNodes.forEach(e=>this.insertFmwElement(e)))}};var i=class{constructor(){this.container=document.getElementById("keyword-container")}removeKeywordList(){for(;this.container.firstChild;)this.container.removeChild(this.container.firstChild)}createCloseSvg(e){const t="http://www.w3.org/2000/svg",n=document.createElementNS(t,"svg");n.setAttribute("class","keyword-list-close-btn list-close-idx-"+e),n.setAttributeNS(null,"width","24"),n.setAttributeNS(null,"height","24"),n.setAttributeNS(null,"fill-rule","evenodd"),n.setAttributeNS(null,"clip-rule","evenodd");const o=document.createElementNS(t,"path");return o.setAttributeNS(null,"d","M12 11.293l10.293-10.293.707.707-10.293 10.293 10.293 10.293-.707.707-10.293-10.293-10.293 10.293-.707-.707 10.293-10.293-10.293-10.293.707-.707 10.293 10.293z"),n.appendChild(o),n}searchKeywordPosition(e){const t=document.createElement("span");return t.classList.add("search-positoon-btn"),t.setAttribute("data-idx",e),t.appendChild(document.createTextNode("검색")),t}appendKeywordList(e){const t=document.createElement("ul"),n=document.createElement("h2");n.appendChild(document.createTextNode("keyword")),this.container.appendChild(n),this.listElement=[],e.forEach((e,n)=>{const o=document.createElement("li");o.classList.add("search-positoon-btn"),o.setAttribute("data-idx",n);const i=document.createElement("p");i.appendChild(document.createTextNode(e)),o.appendChild(i),o.appendChild(this.createCloseSvg(n)),this.listElement.push(o),t.appendChild(o)}),this.container.appendChild(t)}appendKeywordCount(e){e.forEach((e,t)=>{const n=document.createElement("span"),o=document.createTextNode(`(${e})`);n.appendChild(o),this.listElement[t].appendChild(n)})}};n(0);new class{constructor(){this.input=document.getElementById("keyword"),this.keywordList=new i,this.activeTabList=[],this.keywords=[],this.keywordPositionList=[],this.cacheIdx=0,this.cacheCnt=0,this.whaleEventListener(),this.eventListener(),window.localStorage.removeItem("deep-search")}checkRedeclared(){whale.windows.getCurrent({populate:!0},e=>{const t=e.tabs.filter(e=>!0===e.active)[0].id;-1===this.activeTabList.indexOf(t)&&(this.activeTabList.push(t),this.initExecuteCode())})}initExecuteCode(){whale.tabs.executeScript({code:`window.fmwClass = new ${o}();`})}whaleEventListener(){whale.tabs.onUpdated.addListener((e,t)=>{"complete"===t.status&&(this.initExecuteCode(),this.searchExecute(this.keywords.length>0))}),whale.tabs.onActivated.addListener(()=>{this.checkRedeclared(),this.searchExecute(this.keywords.length>0)}),whale.tabs.onRemoved.addListener(e=>{const t=this.activeTabList.indexOf(e);this.activeTabList.splice(t,1)}),document.addEventListener("visibilitychange",()=>{"visible"===document.visibilityState&&(this.checkRedeclared(),this.input.focus())}),whale.runtime.onMessage.addListener(e=>{this.keywordList.appendKeywordCount(e.count),this.keywordPositionList=e.position})}eventListener(){let e=!0;this.input.addEventListener("keyup",t=>{13===t.keyCode&&e&&(this.searchExecute(),e=!1,setTimeout(()=>e=!0,300))}),document.body.addEventListener("click",e=>{if(void 0!==e.target.className.baseVal&&0===e.target.className.baseVal.indexOf("keyword-list-close-btn")){const t=e.target.className.baseVal.split("list-close-idx-")[1];this.keywords.splice(t,1),this.searchExecute(!0)}if("search-positoon-btn"===e.target.className){const t=e.target.dataset.idx;this.searchPosition(t)}},{capture:!0})}searchExecute(e=!1){this.keywords=e?this.keywords:this.input.value.split(","),this.keywords=this.keywords.length>5?this.keywords.slice(0,5):this.keywords,this.keywords=this.keywords.map(e=>e.trim()).filter(Boolean),whale.tabs.executeScript({code:`\n        if(typeof fmwClass !== 'undefined') {\n          window.fmwClass.resetWordCount();\n          window.fmwClass.searchDomElement(${JSON.stringify(this.keywords)});\n          \n          const fmwData = {\n            count: fmwClass.wordCount,\n            position: fmwClass.wordPosition\n          };\n          \n          whale.runtime.sendMessage(fmwData);\n        }\n      `}),this.keywordList.removeKeywordList(),this.keywords.length&&(this.keywordList.appendKeywordList(this.keywords),this.input.value="")}searchPosition(e){this.cacheIdx!==e&&(this.cacheIdx=e,this.cacheCnt=0);const t=this.keywordPositionList[this.cacheIdx];console.log(this.keywordPositionList),this.cacheCnt+1>t.length&&(this.cacheCnt=0),whale.tabs.executeScript({code:`\n        document.documentElement.scrollTop = ${t[this.cacheCnt]};\n      `}),this.cacheCnt+=1}}}]);